Fail
file path is :
projects/deltachat-core/rust/src/securejoin.rs

output is:


error is :
   Compiling deltachat v1.139.6 (/home/k/ogs_PHD/LLM4SE/2Rust_projects/auto_get_functionPair/projects/deltachat-core/rust)
error: expected one of `)`, `,`, `.`, `?`, or an operator, found `"vg-request-with-auth"`
   --> src/securejoin.rs:178:63
    |
178 |         send_handshake_msg(context, contact_chat_id, join_vg? "vg-request-with-auth" : "vc-request-with-auth",
    |                                                              -^^^^^^^^^^^^^^^^^^^^^^ expected one of `)`, `,`, `.`, `?`, or an operator
    |                                                              |
    |                                                              help: missing `,`

error: expected one of `)`, `,`, `.`, `?`, or an operator, found `:`
   --> src/securejoin.rs:178:86
    |
178 |         send_handshake_msg(context, contact_chat_id, join_vg? "vg-request-with-auth" : "vc-request-with-auth",
    |                                                                                      ^ expected one of `)`, `,`, `.`, `?`, or an operator

error: expected one of `)`, `,`, `.`, `?`, or an operator, found `"vg-request"`
   --> src/securejoin.rs:183:63
    |
183 |         send_handshake_msg(context, contact_chat_id, join_vg? "vg-request" : "vc-request",
    |                                                              -^^^^^^^^^^^^ expected one of `)`, `,`, `.`, `?`, or an operator
    |                                                              |
    |                                                              help: missing `,`

error: expected one of `)`, `,`, `.`, `?`, or an operator, found `:`
   --> src/securejoin.rs:183:76
    |
183 |         send_handshake_msg(context, contact_chat_id, join_vg? "vg-request" : "vc-request",
    |                                                                            ^ expected one of `)`, `,`, `.`, `?`, or an operator

error: cannot find macro `anyhow` in this scope
   --> src/securejoin.rs:190:24
    |
190 |             return Err(anyhow!("Failed to allocate ongoing"));
    |                        ^^^^^^
    |
    = note: `anyhow` is in scope, but it is a crate, not a macro
help: consider importing this macro
    |
3   + use anyhow::anyhow;
    |

error: cannot find macro `anyhow` in this scope
   --> src/securejoin.rs:162:20
    |
162 |         return Err(anyhow!("Unknown contact"));
    |                    ^^^^^^
    |
    = note: `anyhow` is in scope, but it is a crate, not a macro
help: consider importing this macro
    |
3   + use anyhow::anyhow;
    |

error: cannot find macro `anyhow` in this scope
   --> src/securejoin.rs:157:20
    |
157 |         return Err(anyhow!("Failed to allocate ongoing"));
    |                    ^^^^^^
    |
    = note: `anyhow` is in scope, but it is a crate, not a macro
help: consider importing this macro
    |
3   + use anyhow::anyhow;
    |

error[E0425]: cannot find value `DC_QR_ASK_VERIFYGROUP` in this scope
   --> src/securejoin.rs:165:36
    |
165 |     let join_vg = qr_scan.state == DC_QR_ASK_VERIFYGROUP;
    |                                    ^^^^^^^^^^^^^^^^^^^^^ not found in this scope

error[E0433]: failed to resolve: use of undeclared type `Arc`
   --> src/securejoin.rs:169:23
    |
169 |     let qr_scan_ref = Arc::clone(&context.inner.read().await.bobs_qr_scan);
    |                       ^^^ use of undeclared type `Arc`
    |
help: consider importing this struct
    |
3   + use std::sync::Arc;
    |

error[E0425]: cannot find value `DC_VC_CONTACT_CONFIRM` in this scope
   --> src/securejoin.rs:175:51
    |
175 |         context.inner.write().await.bob_expects = DC_VC_CONTACT_CONFIRM;
    |                                                   ^^^^^^^^^^^^^^^^^^^^^ not found in this scope

error[E0425]: cannot find value `DC_EVENT_SECUREJOIN_JOINER_PROGRESS` in this scope
   --> src/securejoin.rs:176:49
    |
176 |         context.inner.write().await.cb(context, DC_EVENT_SECUREJOIN_JOINER_PROGRESS, chat_id_2_contact_id(context, contact_chat_id), 400);
    |                                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ not found in this scope

error[E0425]: cannot find value `DC_VC_AUTH_REQUIRED` in this scope
   --> src/securejoin.rs:182:51
    |
182 |         context.inner.write().await.bob_expects = DC_VC_AUTH_REQUIRED;
    |                                                   ^^^^^^^^^^^^^^^^^^^ not found in this scope

error[E0433]: failed to resolve: use of undeclared type `Duration`
   --> src/securejoin.rs:193:28
    |
193 |         tokio::time::sleep(Duration::from_millis(300)).await;
    |                            ^^^^^^^^ use of undeclared type `Duration`
    |
help: consider importing one of these items
    |
3   + use chrono::Duration;
    |
3   + use core::time::Duration;
    |
3   + use std::time::Duration;
    |
3   + use tokio::time::Duration;
    |

error[E0433]: failed to resolve: use of undeclared type `Arc`
   --> src/securejoin.rs:202:23
    |
202 |     let qr_scan_ref = Arc::clone(&context.inner.read().await.bobs_qr_scan);
    |                       ^^^ use of undeclared type `Arc`
    |
help: consider importing this struct
    |
3   + use std::sync::Arc;
    |

warning: denote infinite loops with `loop { ... }`
   --> src/securejoin.rs:187:5
    |
187 |     while true {
    |     ^^^^^^^^^^ help: use `loop`
    |
    = note: `#[warn(while_true)]` on by default

error[E0599]: no method named `read` found for struct `Arc<InnerContext>` in the current scope
   --> src/securejoin.rs:155:43
    |
155 |     let ongoing_allocated = context.inner.read().await.ongoing_allocated();
    |                                           ^^^^ method not found in `Arc<InnerContext>`
    |
    = help: items from traits can only be used if the trait is implemented and in scope
    = note: the following traits define an item `read`, perhaps you need to implement one of them:
            candidate #1: `std::io::Read`
            candidate #2: `tokio::io::AsyncReadExt`
            candidate #3: `futures::AsyncReadExt`
            candidate #4: `futures_lite::AsyncReadExt`
            candidate #5: `XofReader`
            candidate #6: `iter_read::IterReadItem`
            candidate #7: `embedded_io::blocking::Read`
            candidate #8: `rustls::msgs::codec::Codec`
            candidate #9: `digest::xof::XofReader`
            candidate #10: `ssh_encoding::reader::Reader`
            candidate #11: `BinDecodable`
            candidate #12: `rustls::msgs::codec::Codec`
            candidate #13: `ssh_encoding::reader::Reader`
            candidate #14: `futures_lite::io::AsyncReadExt`
            candidate #15: `CustomRead`
            candidate #16: `object::ReadRef`
help: some of the expressions' fields have a method of the same name
    |
155 |     let ongoing_allocated = context.inner.debug_logging.read().await.ongoing_allocated();
    |                                           ++++++++++++++
155 |     let ongoing_allocated = context.inner.last_error.read().await.ongoing_allocated();
    |                                           +++++++++++
155 |     let ongoing_allocated = context.inner.metadata.read().await.ongoing_allocated();
    |                                           +++++++++
155 |     let ongoing_allocated = context.inner.quota.read().await.ongoing_allocated();
    |                                           ++++++
      and 3 other candidates

error[E0609]: no field `id` on type `Qr`
   --> src/securejoin.rs:160:70
    |
160 |     let contact_chat_id = create_chat_by_contact_id(context, qr_scan.id).await?;
    |                                                                      ^^ unknown field

error[E0425]: cannot find function `create_chat_by_contact_id` in this scope
   --> src/securejoin.rs:160:27
    |
160 |     let contact_chat_id = create_chat_by_contact_id(context, qr_scan.id).await?;
    |                           ^^^^^^^^^^^^^^^^^^^^^^^^^ not found in this scope

error[E0609]: no field `state` on type `Qr`
   --> src/securejoin.rs:165:27
    |
165 |     let join_vg = qr_scan.state == DC_QR_ASK_VERIFYGROUP;
    |                           ^^^^^ unknown field

error[E0599]: no method named `write` found for struct `Arc<InnerContext>` in the current scope
   --> src/securejoin.rs:167:19
    |
167 |     context.inner.write().await.bobs_status = 0;
    |                   ^^^^^ method not found in `Arc<InnerContext>`
    |
    = help: items from traits can only be used if the trait is implemented and in scope
    = note: the following traits define an item `write`, perhaps you need to implement one of them:
            candidate #1: `std::io::Write`
            candidate #2: `std::hash::Hasher`
            candidate #3: `tokio::io::AsyncWriteExt`
            candidate #4: `futures::AsyncWriteExt`
            candidate #5: `futures_lite::AsyncWriteExt`
            candidate #6: `der::writer::Writer`
            candidate #7: `embedded_io::blocking::Write`
            candidate #8: `quinn_proto::coding::BufMutExt`
            candidate #9: `der::writer::Writer`
            candidate #10: `itoa::private::Sealed`
            candidate #11: `ssh_encoding::writer::Writer`
            candidate #12: `dtoa::private::Sealed`
            candidate #13: `ssh_encoding::writer::Writer`
            candidate #14: `futures_lite::io::AsyncWriteExt`
            candidate #15: `iroh_quinn_proto::coding::BufMutExt`
            candidate #16: `attohttpc::request::body::Body`
            candidate #17: `CustomWrite`
help: some of the expressions' fields have a method of the same name
    |
167 |     context.inner.debug_logging.write().await.bobs_status = 0;
    |                   ++++++++++++++
167 |     context.inner.last_error.write().await.bobs_status = 0;
    |                   +++++++++++
167 |     context.inner.metadata.write().await.bobs_status = 0;
    |                   +++++++++
167 |     context.inner.quota.write().await.bobs_status = 0;
    |                   ++++++
      and 3 other candidates

error[E0599]: no method named `read` found for struct `Arc<InnerContext>` in the current scope
   --> src/securejoin.rs:169:49
    |
169 |     let qr_scan_ref = Arc::clone(&context.inner.read().await.bobs_qr_scan);
    |                                                 ^^^^ method not found in `Arc<InnerContext>`
    |
    = help: items from traits can only be used if the trait is implemented and in scope
    = note: the following traits define an item `read`, perhaps you need to implement one of them:
            candidate #1: `std::io::Read`
            candidate #2: `tokio::io::AsyncReadExt`
            candidate #3: `futures::AsyncReadExt`
            candidate #4: `futures_lite::AsyncReadExt`
            candidate #5: `XofReader`
            candidate #6: `iter_read::IterReadItem`
            candidate #7: `embedded_io::blocking::Read`
            candidate #8: `rustls::msgs::codec::Codec`
            candidate #9: `digest::xof::XofReader`
            candidate #10: `ssh_encoding::reader::Reader`
            candidate #11: `BinDecodable`
            candidate #12: `rustls::msgs::codec::Codec`
            candidate #13: `ssh_encoding::reader::Reader`
            candidate #14: `futures_lite::io::AsyncReadExt`
            candidate #15: `CustomRead`
            candidate #16: `object::ReadRef`
help: some of the expressions' fields have a method of the same name
    |
169 |     let qr_scan_ref = Arc::clone(&context.inner.debug_logging.read().await.bobs_qr_scan);
    |                                                 ++++++++++++++
169 |     let qr_scan_ref = Arc::clone(&context.inner.last_error.read().await.bobs_qr_scan);
    |                                                 +++++++++++
169 |     let qr_scan_ref = Arc::clone(&context.inner.metadata.read().await.bobs_qr_scan);
    |                                                 +++++++++
169 |     let qr_scan_ref = Arc::clone(&context.inner.quota.read().await.bobs_qr_scan);
    |                                                 ++++++
      and 3 other candidates

error[E0599]: no method named `write` found for struct `Arc<InnerContext>` in the current scope
   --> src/securejoin.rs:171:19
    |
171 |     context.inner.write().await.bobs_qr_scan = qr_scan;
    |                   ^^^^^ method not found in `Arc<InnerContext>`
    |
    = help: items from traits can only be used if the trait is implemented and in scope
    = note: the following traits define an item `write`, perhaps you need to implement one of them:
            candidate #1: `std::io::Write`
            candidate #2: `std::hash::Hasher`
            candidate #3: `tokio::io::AsyncWriteExt`
            candidate #4: `futures::AsyncWriteExt`
            candidate #5: `futures_lite::AsyncWriteExt`
            candidate #6: `der::writer::Writer`
            candidate #7: `embedded_io::blocking::Write`
            candidate #8: `quinn_proto::coding::BufMutExt`
            candidate #9: `der::writer::Writer`
            candidate #10: `itoa::private::Sealed`
            candidate #11: `ssh_encoding::writer::Writer`
            candidate #12: `dtoa::private::Sealed`
            candidate #13: `ssh_encoding::writer::Writer`
            candidate #14: `futures_lite::io::AsyncWriteExt`
            candidate #15: `iroh_quinn_proto::coding::BufMutExt`
            candidate #16: `attohttpc::request::body::Body`
            candidate #17: `CustomWrite`
help: some of the expressions' fields have a method of the same name
    |
171 |     context.inner.debug_logging.write().await.bobs_qr_scan = qr_scan;
    |                   ++++++++++++++
171 |     context.inner.last_error.write().await.bobs_qr_scan = qr_scan;
    |                   +++++++++++
171 |     context.inner.metadata.write().await.bobs_qr_scan = qr_scan;
    |                   +++++++++
171 |     context.inner.quota.write().await.bobs_qr_scan = qr_scan;
    |                   ++++++
      and 3 other candidates

error[E0425]: cannot find function `fingerprint_equals_sender` in this scope
   --> src/securejoin.rs:173:8
    |
173 |     if fingerprint_equals_sender(context, qr_scan.fingerprint, contact_chat_id).await? {
    |        ^^^^^^^^^^^^^^^^^^^^^^^^^ not found in this scope

error[E0599]: no method named `write` found for struct `Arc<InnerContext>` in the current scope
   --> src/securejoin.rs:175:23
    |
175 |         context.inner.write().await.bob_expects = DC_VC_CONTACT_CONFIRM;
    |                       ^^^^^ method not found in `Arc<InnerContext>`
    |
    = help: items from traits can only be used if the trait is implemented and in scope
    = note: the following traits define an item `write`, perhaps you need to implement one of them:
            candidate #1: `std::io::Write`
            candidate #2: `std::hash::Hasher`
            candidate #3: `tokio::io::AsyncWriteExt`
            candidate #4: `futures::AsyncWriteExt`
            candidate #5: `futures_lite::AsyncWriteExt`
            candidate #6: `der::writer::Writer`
            candidate #7: `embedded_io::blocking::Write`
            candidate #8: `quinn_proto::coding::BufMutExt`
            candidate #9: `der::writer::Writer`
            candidate #10: `itoa::private::Sealed`
            candidate #11: `ssh_encoding::writer::Writer`
            candidate #12: `dtoa::private::Sealed`
            candidate #13: `ssh_encoding::writer::Writer`
            candidate #14: `futures_lite::io::AsyncWriteExt`
            candidate #15: `iroh_quinn_proto::coding::BufMutExt`
            candidate #16: `attohttpc::request::body::Body`
            candidate #17: `CustomWrite`
help: some of the expressions' fields have a method of the same name
    |
175 |         context.inner.debug_logging.write().await.bob_expects = DC_VC_CONTACT_CONFIRM;
    |                       ++++++++++++++
175 |         context.inner.last_error.write().await.bob_expects = DC_VC_CONTACT_CONFIRM;
    |                       +++++++++++
175 |         context.inner.metadata.write().await.bob_expects = DC_VC_CONTACT_CONFIRM;
    |                       +++++++++
175 |         context.inner.quota.write().await.bob_expects = DC_VC_CONTACT_CONFIRM;
    |                       ++++++
      and 3 other candidates

error[E0599]: no method named `write` found for struct `Arc<InnerContext>` in the current scope
   --> src/securejoin.rs:176:23
    |
176 |         context.inner.write().await.cb(context, DC_EVENT_SECUREJOIN_JOINER_PROGRESS, chat_id_2_contact_id(context, contact_chat_id), 400);
    |                       ^^^^^ method not found in `Arc<InnerContext>`
    |
    = help: items from traits can only be used if the trait is implemented and in scope
    = note: the following traits define an item `write`, perhaps you need to implement one of them:
            candidate #1: `std::io::Write`
            candidate #2: `std::hash::Hasher`
            candidate #3: `tokio::io::AsyncWriteExt`
            candidate #4: `futures::AsyncWriteExt`
            candidate #5: `futures_lite::AsyncWriteExt`
            candidate #6: `der::writer::Writer`
            candidate #7: `embedded_io::blocking::Write`
            candidate #8: `quinn_proto::coding::BufMutExt`
            candidate #9: `der::writer::Writer`
            candidate #10: `itoa::private::Sealed`
            candidate #11: `ssh_encoding::writer::Writer`
            candidate #12: `dtoa::private::Sealed`
            candidate #13: `ssh_encoding::writer::Writer`
            candidate #14: `futures_lite::io::AsyncWriteExt`
            candidate #15: `iroh_quinn_proto::coding::BufMutExt`
            candidate #16: `attohttpc::request::body::Body`
            candidate #17: `CustomWrite`
help: some of the expressions' fields have a method of the same name
    |
176 |         context.inner.debug_logging.write().await.cb(context, DC_EVENT_SECUREJOIN_JOINER_PROGRESS, chat_id_2_contact_id(context, contact_chat_id), 400);
    |                       ++++++++++++++
176 |         context.inner.last_error.write().await.cb(context, DC_EVENT_SECUREJOIN_JOINER_PROGRESS, chat_id_2_contact_id(context, contact_chat_id), 400);
    |                       +++++++++++
176 |         context.inner.metadata.write().await.cb(context, DC_EVENT_SECUREJOIN_JOINER_PROGRESS, chat_id_2_contact_id(context, contact_chat_id), 400);
    |                       +++++++++
176 |         context.inner.quota.write().await.cb(context, DC_EVENT_SECUREJOIN_JOINER_PROGRESS, chat_id_2_contact_id(context, contact_chat_id), 400);
    |                       ++++++
      and 3 other candidates

error[E0425]: cannot find function `chat_id_2_contact_id` in this scope
   --> src/securejoin.rs:176:86
    |
176 |         context.inner.write().await.cb(context, DC_EVENT_SECUREJOIN_JOINER_PROGRESS, chat_id_2_contact_id(context, contact_chat_id), 400);
    |                                                                                      ^^^^^^^^^^^^^^^^^^^^ not found in this scope

error[E0277]: the `?` operator can only be used on `Result`s, not `Option`s, in an async function that returns `Result`
   --> src/securejoin.rs:177:66
    |
148 |   pub async fn join_securejoin(context: &Context, qr: &str) -> Result<ChatId> {
    |  _____________________________________________________________________________-
149 | |     info!(context, "Requesting secure-join...",);
150 | |
151 | |     let qr_scan = check_qr(context, qr).await?;
...   |
177 | |         let own_fingerprint = get_self_fingerprint(context).await?;
    | |                                                                  ^ use `.ok_or(...)?` to provide an error compatible with `std::result::Result<ChatId, anyhow::Error>`
...   |
209 | |     Ok(ret_chat_id)
210 | | }
    | |_- this function returns a `Result`
    |
    = help: the trait `FromResidual<std::option::Option<Infallible>>` is not implemented for `std::result::Result<ChatId, anyhow::Error>`
    = help: the following other types implement trait `FromResidual<R>`:
              <std::result::Result<T, F> as FromResidual<Yeet<E>>>
              <std::result::Result<T, F> as FromResidual<std::result::Result<Infallible, E>>>

error[E0599]: no method named `write` found for struct `Arc<InnerContext>` in the current scope
   --> src/securejoin.rs:182:23
    |
182 |         context.inner.write().await.bob_expects = DC_VC_AUTH_REQUIRED;
    |                       ^^^^^ method not found in `Arc<InnerContext>`
    |
    = help: items from traits can only be used if the trait is implemented and in scope
    = note: the following traits define an item `write`, perhaps you need to implement one of them:
            candidate #1: `std::io::Write`
            candidate #2: `std::hash::Hasher`
            candidate #3: `tokio::io::AsyncWriteExt`
            candidate #4: `futures::AsyncWriteExt`
            candidate #5: `futures_lite::AsyncWriteExt`
            candidate #6: `der::writer::Writer`
            candidate #7: `embedded_io::blocking::Write`
            candidate #8: `quinn_proto::coding::BufMutExt`
            candidate #9: `der::writer::Writer`
            candidate #10: `itoa::private::Sealed`
            candidate #11: `ssh_encoding::writer::Writer`
            candidate #12: `dtoa::private::Sealed`
            candidate #13: `ssh_encoding::writer::Writer`
            candidate #14: `futures_lite::io::AsyncWriteExt`
            candidate #15: `iroh_quinn_proto::coding::BufMutExt`
            candidate #16: `attohttpc::request::body::Body`
            candidate #17: `CustomWrite`
help: some of the expressions' fields have a method of the same name
    |
182 |         context.inner.debug_logging.write().await.bob_expects = DC_VC_AUTH_REQUIRED;
    |                       ++++++++++++++
182 |         context.inner.last_error.write().await.bob_expects = DC_VC_AUTH_REQUIRED;
    |                       +++++++++++
182 |         context.inner.metadata.write().await.bob_expects = DC_VC_AUTH_REQUIRED;
    |                       +++++++++
182 |         context.inner.quota.write().await.bob_expects = DC_VC_AUTH_REQUIRED;
    |                       ++++++
      and 3 other candidates

error[E0599]: no method named `read` found for struct `Arc<InnerContext>` in the current scope
   --> src/securejoin.rs:188:47
    |
188 |         let ongoing_allocated = context.inner.read().await.ongoing_allocated();
    |                                               ^^^^ method not found in `Arc<InnerContext>`
    |
    = help: items from traits can only be used if the trait is implemented and in scope
    = note: the following traits define an item `read`, perhaps you need to implement one of them:
            candidate #1: `std::io::Read`
            candidate #2: `tokio::io::AsyncReadExt`
            candidate #3: `futures::AsyncReadExt`
            candidate #4: `futures_lite::AsyncReadExt`
            candidate #5: `XofReader`
            candidate #6: `iter_read::IterReadItem`
            candidate #7: `embedded_io::blocking::Read`
            candidate #8: `rustls::msgs::codec::Codec`
            candidate #9: `digest::xof::XofReader`
            candidate #10: `ssh_encoding::reader::Reader`
            candidate #11: `BinDecodable`
            candidate #12: `rustls::msgs::codec::Codec`
            candidate #13: `ssh_encoding::reader::Reader`
            candidate #14: `futures_lite::io::AsyncReadExt`
            candidate #15: `CustomRead`
            candidate #16: `object::ReadRef`
help: some of the expressions' fields have a method of the same name
    |
188 |         let ongoing_allocated = context.inner.debug_logging.read().await.ongoing_allocated();
    |                                               ++++++++++++++
188 |         let ongoing_allocated = context.inner.last_error.read().await.ongoing_allocated();
    |                                               +++++++++++
188 |         let ongoing_allocated = context.inner.metadata.read().await.ongoing_allocated();
    |                                               +++++++++
188 |         let ongoing_allocated = context.inner.quota.read().await.ongoing_allocated();
    |                                               ++++++
      and 3 other candidates

error[E0425]: cannot find function `dc_get_chat_id_by_grpid` in this scope
   --> src/securejoin.rs:197:9
    |
197 |         dc_get_chat_id_by_grpid(context, qr_scan.text2, None, None).await?
    |         ^^^^^^^^^^^^^^^^^^^^^^^ not found in this scope

error[E0599]: no method named `read` found for struct `Arc<InnerContext>` in the current scope
   --> src/securejoin.rs:202:49
    |
202 |     let qr_scan_ref = Arc::clone(&context.inner.read().await.bobs_qr_scan);
    |                                                 ^^^^ method not found in `Arc<InnerContext>`
    |
    = help: items from traits can only be used if the trait is implemented and in scope
    = note: the following traits define an item `read`, perhaps you need to implement one of them:
            candidate #1: `std::io::Read`
            candidate #2: `tokio::io::AsyncReadExt`
            candidate #3: `futures::AsyncReadExt`
            candidate #4: `futures_lite::AsyncReadExt`
            candidate #5: `XofReader`
            candidate #6: `iter_read::IterReadItem`
            candidate #7: `embedded_io::blocking::Read`
            candidate #8: `rustls::msgs::codec::Codec`
            candidate #9: `digest::xof::XofReader`
            candidate #10: `ssh_encoding::reader::Reader`
            candidate #11: `BinDecodable`
            candidate #12: `rustls::msgs::codec::Codec`
            candidate #13: `ssh_encoding::reader::Reader`
            candidate #14: `futures_lite::io::AsyncReadExt`
            candidate #15: `CustomRead`
            candidate #16: `object::ReadRef`
help: some of the expressions' fields have a method of the same name
    |
202 |     let qr_scan_ref = Arc::clone(&context.inner.debug_logging.read().await.bobs_qr_scan);
    |                                                 ++++++++++++++
202 |     let qr_scan_ref = Arc::clone(&context.inner.last_error.read().await.bobs_qr_scan);
    |                                                 +++++++++++
202 |     let qr_scan_ref = Arc::clone(&context.inner.metadata.read().await.bobs_qr_scan);
    |                                                 +++++++++
202 |     let qr_scan_ref = Arc::clone(&context.inner.quota.read().await.bobs_qr_scan);
    |                                                 ++++++
      and 3 other candidates

error[E0599]: no method named `write` found for struct `Arc<InnerContext>` in the current scope
   --> src/securejoin.rs:204:19
    |
204 |     context.inner.write().await.bobs_qr_scan = None;
    |                   ^^^^^ method not found in `Arc<InnerContext>`
    |
    = help: items from traits can only be used if the trait is implemented and in scope
    = note: the following traits define an item `write`, perhaps you need to implement one of them:
            candidate #1: `std::io::Write`
            candidate #2: `std::hash::Hasher`
            candidate #3: `tokio::io::AsyncWriteExt`
            candidate #4: `futures::AsyncWriteExt`
            candidate #5: `futures_lite::AsyncWriteExt`
            candidate #6: `der::writer::Writer`
            candidate #7: `embedded_io::blocking::Write`
            candidate #8: `quinn_proto::coding::BufMutExt`
            candidate #9: `der::writer::Writer`
            candidate #10: `itoa::private::Sealed`
            candidate #11: `ssh_encoding::writer::Writer`
            candidate #12: `dtoa::private::Sealed`
            candidate #13: `ssh_encoding::writer::Writer`
            candidate #14: `futures_lite::io::AsyncWriteExt`
            candidate #15: `iroh_quinn_proto::coding::BufMutExt`
            candidate #16: `attohttpc::request::body::Body`
            candidate #17: `CustomWrite`
help: some of the expressions' fields have a method of the same name
    |
204 |     context.inner.debug_logging.write().await.bobs_qr_scan = None;
    |                   ++++++++++++++
204 |     context.inner.last_error.write().await.bobs_qr_scan = None;
    |                   +++++++++++
204 |     context.inner.metadata.write().await.bobs_qr_scan = None;
    |                   +++++++++
204 |     context.inner.quota.write().await.bobs_qr_scan = None;
    |                   ++++++
      and 3 other candidates

error[E0425]: cannot find function `dc_lot_unref` in this scope
   --> src/securejoin.rs:206:5
    |
206 |     dc_lot_unref(qr_scan);
    |     ^^^^^^^^^^^^ not found in this scope

error[E0425]: cannot find function `dc_free_ongoing` in this scope
   --> src/securejoin.rs:208:28
    |
208 |     if ongoing_allocated { dc_free_ongoing(context).await; }
    |                            ^^^^^^^^^^^^^^^ not found in this scope

error[E0277]: can't compare `ChatId` with `{integer}`
   --> src/securejoin.rs:161:24
    |
161 |     if contact_chat_id == 0 {
    |                        ^^ no implementation for `ChatId == {integer}`
    |
    = help: the trait `PartialEq<{integer}>` is not implemented for `ChatId`
    = help: the trait `PartialEq` is implemented for `ChatId`
    = help: for that trait implementation, expected `ChatId`, found `{integer}`

error[E0599]: no method named `read` found for struct `Arc<InnerContext>` in the current scope
   --> src/securejoin.rs:155:43
    |
155 |     let ongoing_allocated = context.inner.read().await.ongoing_allocated();
    |                                           ^^^^ method not found in `Arc<InnerContext>`
    |
    = help: items from traits can only be used if the trait is implemented and in scope
    = note: the following traits define an item `read`, perhaps you need to implement one of them:
            candidate #1: `std::io::Read`
            candidate #2: `tokio::io::AsyncReadExt`
            candidate #3: `futures::AsyncReadExt`
            candidate #4: `futures_lite::AsyncReadExt`
            candidate #5: `XofReader`
            candidate #6: `iter_read::IterReadItem`
            candidate #7: `embedded_io::blocking::Read`
            candidate #8: `rustls::msgs::codec::Codec`
            candidate #9: `digest::xof::XofReader`
            candidate #10: `ssh_encoding::reader::Reader`
            candidate #11: `BinDecodable`
            candidate #12: `object::read::read_ref::ReadRef`
            candidate #13: `rustls::msgs::codec::Codec`
            candidate #14: `ssh_encoding::reader::Reader`
            candidate #15: `futures_lite::io::AsyncReadExt`
            candidate #16: `CustomRead`
help: some of the expressions' fields have a method of the same name
    |
155 |     let ongoing_allocated = context.inner.debug_logging.read().await.ongoing_allocated();
    |                                           ++++++++++++++
155 |     let ongoing_allocated = context.inner.last_error.read().await.ongoing_allocated();
    |                                           +++++++++++
155 |     let ongoing_allocated = context.inner.metadata.read().await.ongoing_allocated();
    |                                           +++++++++
155 |     let ongoing_allocated = context.inner.quota.read().await.ongoing_allocated();
    |                                           ++++++
      and 3 other candidates

error[E0609]: no field `id` on type `qr::Qr`
   --> src/securejoin.rs:160:70
    |
160 |     let contact_chat_id = create_chat_by_contact_id(context, qr_scan.id).await?;
    |                                                                      ^^ unknown field

error[E0609]: no field `state` on type `qr::Qr`
   --> src/securejoin.rs:165:27
    |
165 |     let join_vg = qr_scan.state == DC_QR_ASK_VERIFYGROUP;
    |                           ^^^^^ unknown field

error[E0599]: no method named `read` found for struct `Arc<InnerContext>` in the current scope
   --> src/securejoin.rs:169:49
    |
169 |     let qr_scan_ref = Arc::clone(&context.inner.read().await.bobs_qr_scan);
    |                                                 ^^^^ method not found in `Arc<InnerContext>`
    |
    = help: items from traits can only be used if the trait is implemented and in scope
    = note: the following traits define an item `read`, perhaps you need to implement one of them:
            candidate #1: `std::io::Read`
            candidate #2: `tokio::io::AsyncReadExt`
            candidate #3: `futures::AsyncReadExt`
            candidate #4: `futures_lite::AsyncReadExt`
            candidate #5: `XofReader`
            candidate #6: `iter_read::IterReadItem`
            candidate #7: `embedded_io::blocking::Read`
            candidate #8: `rustls::msgs::codec::Codec`
            candidate #9: `digest::xof::XofReader`
            candidate #10: `ssh_encoding::reader::Reader`
            candidate #11: `BinDecodable`
            candidate #12: `object::read::read_ref::ReadRef`
            candidate #13: `rustls::msgs::codec::Codec`
            candidate #14: `ssh_encoding::reader::Reader`
            candidate #15: `futures_lite::io::AsyncReadExt`
            candidate #16: `CustomRead`
help: some of the expressions' fields have a method of the same name
    |
169 |     let qr_scan_ref = Arc::clone(&context.inner.debug_logging.read().await.bobs_qr_scan);
    |                                                 ++++++++++++++
169 |     let qr_scan_ref = Arc::clone(&context.inner.last_error.read().await.bobs_qr_scan);
    |                                                 +++++++++++
169 |     let qr_scan_ref = Arc::clone(&context.inner.metadata.read().await.bobs_qr_scan);
    |                                                 +++++++++
169 |     let qr_scan_ref = Arc::clone(&context.inner.quota.read().await.bobs_qr_scan);
    |                                                 ++++++
      and 3 other candidates

Some errors have detailed explanations: E0277, E0425, E0433, E0599, E0609.
For more information about an error, try `rustc --explain E0277`.
warning: `deltachat` (lib) generated 1 warning
error: could not compile `deltachat` (lib) due to 34 previous errors; 1 warning emitted
warning: build failed, waiting for other jobs to finish...
error[E0277]: the `?` operator can only be used on `Result`s, not `Option`s, in an async function that returns `Result`
   --> src/securejoin.rs:177:66
    |
148 |   pub async fn join_securejoin(context: &Context, qr: &str) -> Result<ChatId> {
    |  _____________________________________________________________________________-
149 | |     info!(context, "Requesting secure-join...",);
150 | |
151 | |     let qr_scan = check_qr(context, qr).await?;
...   |
177 | |         let own_fingerprint = get_self_fingerprint(context).await?;
    | |                                                                  ^ use `.ok_or(...)?` to provide an error compatible with `std::result::Result<chat::ChatId, anyhow::Error>`
...   |
209 | |     Ok(ret_chat_id)
210 | | }
    | |_- this function returns a `Result`
    |
    = help: the trait `FromResidual<std::option::Option<Infallible>>` is not implemented for `std::result::Result<chat::ChatId, anyhow::Error>`
    = help: the following other types implement trait `FromResidual<R>`:
              <std::result::Result<T, F> as FromResidual<Yeet<E>>>
              <std::result::Result<T, F> as FromResidual<std::result::Result<Infallible, E>>>

error[E0599]: no method named `read` found for struct `Arc<InnerContext>` in the current scope
   --> src/securejoin.rs:188:47
    |
188 |         let ongoing_allocated = context.inner.read().await.ongoing_allocated();
    |                                               ^^^^ method not found in `Arc<InnerContext>`
    |
    = help: items from traits can only be used if the trait is implemented and in scope
    = note: the following traits define an item `read`, perhaps you need to implement one of them:
            candidate #1: `std::io::Read`
            candidate #2: `tokio::io::AsyncReadExt`
            candidate #3: `futures::AsyncReadExt`
            candidate #4: `futures_lite::AsyncReadExt`
            candidate #5: `XofReader`
            candidate #6: `iter_read::IterReadItem`
            candidate #7: `embedded_io::blocking::Read`
            candidate #8: `rustls::msgs::codec::Codec`
            candidate #9: `digest::xof::XofReader`
            candidate #10: `ssh_encoding::reader::Reader`
            candidate #11: `BinDecodable`
            candidate #12: `object::read::read_ref::ReadRef`
            candidate #13: `rustls::msgs::codec::Codec`
            candidate #14: `ssh_encoding::reader::Reader`
            candidate #15: `futures_lite::io::AsyncReadExt`
            candidate #16: `CustomRead`
help: some of the expressions' fields have a method of the same name
    |
188 |         let ongoing_allocated = context.inner.debug_logging.read().await.ongoing_allocated();
    |                                               ++++++++++++++
188 |         let ongoing_allocated = context.inner.last_error.read().await.ongoing_allocated();
    |                                               +++++++++++
188 |         let ongoing_allocated = context.inner.metadata.read().await.ongoing_allocated();
    |                                               +++++++++
188 |         let ongoing_allocated = context.inner.quota.read().await.ongoing_allocated();
    |                                               ++++++
      and 3 other candidates

error[E0599]: no method named `read` found for struct `Arc<InnerContext>` in the current scope
   --> src/securejoin.rs:202:49
    |
202 |     let qr_scan_ref = Arc::clone(&context.inner.read().await.bobs_qr_scan);
    |                                                 ^^^^ method not found in `Arc<InnerContext>`
    |
    = help: items from traits can only be used if the trait is implemented and in scope
    = note: the following traits define an item `read`, perhaps you need to implement one of them:
            candidate #1: `std::io::Read`
            candidate #2: `tokio::io::AsyncReadExt`
            candidate #3: `futures::AsyncReadExt`
            candidate #4: `futures_lite::AsyncReadExt`
            candidate #5: `XofReader`
            candidate #6: `iter_read::IterReadItem`
            candidate #7: `embedded_io::blocking::Read`
            candidate #8: `rustls::msgs::codec::Codec`
            candidate #9: `digest::xof::XofReader`
            candidate #10: `ssh_encoding::reader::Reader`
            candidate #11: `BinDecodable`
            candidate #12: `object::read::read_ref::ReadRef`
            candidate #13: `rustls::msgs::codec::Codec`
            candidate #14: `ssh_encoding::reader::Reader`
            candidate #15: `futures_lite::io::AsyncReadExt`
            candidate #16: `CustomRead`
help: some of the expressions' fields have a method of the same name
    |
202 |     let qr_scan_ref = Arc::clone(&context.inner.debug_logging.read().await.bobs_qr_scan);
    |                                                 ++++++++++++++
202 |     let qr_scan_ref = Arc::clone(&context.inner.last_error.read().await.bobs_qr_scan);
    |                                                 +++++++++++
202 |     let qr_scan_ref = Arc::clone(&context.inner.metadata.read().await.bobs_qr_scan);
    |                                                 +++++++++
202 |     let qr_scan_ref = Arc::clone(&context.inner.quota.read().await.bobs_qr_scan);
    |                                                 ++++++
      and 3 other candidates

error[E0277]: can't compare `chat::ChatId` with `{integer}`
   --> src/securejoin.rs:161:24
    |
161 |     if contact_chat_id == 0 {
    |                        ^^ no implementation for `chat::ChatId == {integer}`
    |
    = help: the trait `PartialEq<{integer}>` is not implemented for `chat::ChatId`
    = help: the trait `PartialEq` is implemented for `chat::ChatId`
    = help: for that trait implementation, expected `chat::ChatId`, found `{integer}`

warning: `deltachat` (lib test) generated 1 warning (1 duplicate)
error: could not compile `deltachat` (lib test) due to 34 previous errors; 1 warning emitted
error: command `/home/k/.rustup/toolchains/1.77.1-x86_64-unknown-linux-gnu/bin/cargo test --no-run --message-format json-render-diagnostics` exited with code 101

