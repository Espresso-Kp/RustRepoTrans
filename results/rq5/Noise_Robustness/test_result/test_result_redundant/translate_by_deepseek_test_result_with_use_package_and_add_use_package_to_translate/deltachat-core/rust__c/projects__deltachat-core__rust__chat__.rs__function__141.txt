Fail
file path is :
projects/deltachat-core/rust/src/chat.rs

output is:


error is :
    Blocking waiting for file lock on package cache
   Compiling deltachat v1.139.6 (/home/k/ogs_PHD/LLM4SE/2Rust_projects/auto_get_functionPair/projects/deltachat-core/rust)
error[E0252]: the name `HashMap` is defined multiple times
  --> src/chat.rs:16:24
   |
12 | use std::collections::HashMap;
   |     ------------------------- previous import of the type `HashMap` here
...
16 | use std::collections::{HashMap, HashSet};
   |                        ^^^^^^^--
   |                        |
   |                        `HashMap` reimported here
   |                        help: remove unnecessary import
   |
   = note: `HashMap` must be defined only once in the type namespace of this module

error[E0252]: the name `PathBuf` is defined multiple times
  --> src/chat.rs:18:23
   |
5  | use std::path::PathBuf;
   |     ------------------ previous import of the type `PathBuf` here
...
18 | use std::path::{Path, PathBuf};
   |                       ^^^^^^^ `PathBuf` reimported here
   |
   = note: `PathBuf` must be defined only once in the type namespace of this module

error[E0252]: the name `Params` is defined multiple times
  --> src/chat.rs:51:27
   |
11 | use rusqlite::{self, Params};
   |                      ------ previous import of the trait `Params` here
...
51 | use crate::param::{Param, Params};
   |                           ^^^^^^ `Params` reimported here
   |
   = note: `Params` must be defined only once in the type namespace of this module
help: you can use `as` to change the binding name of the import
   |
51 | use crate::param::{Param, Params as OtherParams};
   |                           ~~~~~~~~~~~~~~~~~~~~~

error[E0432]: unresolved import `crate::Context`
  --> src/chat.rs:13:5
   |
13 | use crate::Context;
   |     ^^^^^^^^^^^^^^ no `Context` in the root
   |
help: a similar name exists in the module
   |
13 | use crate::context;
   |            ~~~~~~~
help: consider importing one of these items instead
   |
13 | use anyhow::Context;
   |     ~~~~~~~~~~~~~~~
13 | use core::task::Context;
   |     ~~~~~~~~~~~~~~~~~~~
13 | use crate::context::Context;
   |     ~~~~~~~~~~~~~~~~~~~~~~~
13 | use exif::Context;
   |     ~~~~~~~~~~~~~
     and 2 other candidates

warning: unused import: `std::sync::Arc`
 --> src/chat.rs:4:5
  |
4 | use std::sync::Arc;
  |     ^^^^^^^^^^^^^^
  |
note: the lint level is defined here
 --> src/lib.rs:6:5
  |
6 |     unused,
  |     ^^^^^^
  = note: `#[warn(unused_imports)]` implied by `#[warn(unused)]`

warning: unused import: `tokio::sync::Mutex`
 --> src/chat.rs:6:5
  |
6 | use tokio::sync::Mutex;
  |     ^^^^^^^^^^^^^^^^^^

warning: unused import: `tokio::sync::RwLock`
 --> src/chat.rs:7:5
  |
7 | use tokio::sync::RwLock;
  |     ^^^^^^^^^^^^^^^^^^^

warning: unused import: `tokio::sync::Notify`
 --> src/chat.rs:8:5
  |
8 | use tokio::sync::Notify;
  |     ^^^^^^^^^^^^^^^^^^^

warning: unused import: `tokio::sync::OnceCell`
 --> src/chat.rs:9:5
  |
9 | use tokio::sync::OnceCell;
  |     ^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `std::sync::atomic::AtomicBool`
  --> src/chat.rs:10:5
   |
10 | use std::sync::atomic::AtomicBool;
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `HashMap`
  --> src/chat.rs:16:24
   |
16 | use std::collections::{HashMap, HashSet};
   |                        ^^^^^^^

warning: unused import: `PathBuf`
  --> src/chat.rs:18:23
   |
18 | use std::path::{Path, PathBuf};
   |                       ^^^^^^^

warning: unused import: `Params`
  --> src/chat.rs:51:27
   |
51 | use crate::param::{Param, Params};
   |                           ^^^^^^

error[E0599]: no function or associated item named `new` found for trait `rusqlite::Params`
    --> src/chat.rs:2537:34
     |
2537 |         let mut params = Params::new();
     |                                  ^^^ function or associated item not found in `Params`

error[E0277]: the trait bound `dyn rusqlite::Params: std::default::Default` is not satisfied
    --> src/chat.rs:1542:65
     |
1542 |                         param: row.get::<_, String>(3)?.parse().unwrap_or_default(),
     |                                                                 ^^^^^^^^^^^^^^^^^ the trait `std::default::Default` is not implemented for `dyn rusqlite::Params`
     |
note: required by a bound in `std::result::Result::<T, E>::unwrap_or_default`
    --> /home/k/.rustup/toolchains/1.77.1-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/core/src/result.rs:1106:12
     |
1104 |     pub fn unwrap_or_default(self) -> T
     |            ----------------- required by a bound in this associated function
1105 |     where
1106 |         T: Default,
     |            ^^^^^^^ required by this bound in `Result::<T, E>::unwrap_or_default`

error[E0277]: the trait bound `dyn rusqlite::Params: FromStr` is not satisfied
    --> src/chat.rs:1542:57
     |
1542 |                         param: row.get::<_, String>(3)?.parse().unwrap_or_default(),
     |                                                         ^^^^^ the trait `FromStr` is not implemented for `dyn rusqlite::Params`
     |
     = help: the following other types implement trait `FromStr`:
               bool
               char
               isize
               i8
               i16
               i32
               i64
               i128
             and 232 others
note: required by a bound in `core::str::<impl str>::parse`
    --> /home/k/.rustup/toolchains/1.77.1-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/core/src/str/mod.rs:2413:21
     |
2413 |     pub fn parse<F: FromStr>(&self) -> Result<F, F::Err> {
     |                     ^^^^^^^ required by this bound in `core::str::<impl str>::parse`

error[E0277]: `(dyn rusqlite::Params + 'static)` cannot be sent between threads safely
    --> src/chat.rs:1530:14
     |
1530 |             .query_row(
     |              ^^^^^^^^^ `(dyn rusqlite::Params + 'static)` cannot be sent between threads safely
     |
     = help: within `Chat`, the trait `std::marker::Send` is not implemented for `(dyn rusqlite::Params + 'static)`, which is required by `Chat: std::marker::Send`
note: required because it appears within the type `Chat`
    --> src/chat.rs:1492:12
     |
1492 | pub struct Chat {
     |            ^^^^
note: required by a bound in `Sql::query_row`
    --> src/sql.rs:467:12
     |
459  |     pub async fn query_row<T, F>(
     |                  --------- required by a bound in this associated function
...
467  |         T: Send + 'static,
     |            ^^^^ required by this bound in `Sql::query_row`

error[E0599]: no method named `exists` found for trait object `(dyn rusqlite::Params + 'static)` in the current scope
    --> src/chat.rs:1579:27
     |
1579 |             if chat.param.exists(Param::Selftalk) {
     |                           ^^^^^^ method not found in `dyn Params`

error[E0599]: no method named `exists` found for trait object `(dyn rusqlite::Params + 'static)` in the current scope
    --> src/chat.rs:1581:34
     |
1581 |             } else if chat.param.exists(Param::Devicetalk) {
     |                                  ^^^^^^ method not found in `dyn Params`

error[E0599]: no function or associated item named `new` found for trait `rusqlite::Params`
    --> src/chat.rs:1654:49
     |
1654 |         let (mut param0, mut param1) = (Params::new(), Params::new());
     |                                                 ^^^ function or associated item not found in `Params`

error[E0599]: no function or associated item named `new` found for trait `rusqlite::Params`
    --> src/chat.rs:1654:64
     |
1654 |         let (mut param0, mut param1) = (Params::new(), Params::new());
     |                                                                ^^^ function or associated item not found in `Params`

error[E0599]: no method named `get_int` found for trait object `(dyn rusqlite::Params + 'static)` in the current scope
    --> src/chat.rs:1929:27
     |
1929 |             && self.param.get_int(Param::Unpromoted).unwrap_or_default() == 1
     |                           ^^^^^^^ method not found in `dyn Params`

error[E0599]: no method named `remove` found for trait object `(dyn rusqlite::Params + 'static)` in the current scope
    --> src/chat.rs:1932:24
     |
1932 |             self.param.remove(Param::Unpromoted);
     |                        ^^^^^^ method not found in `dyn Params`

error[E0599]: no method named `get` found for trait object `(dyn rusqlite::Params + 'static)` in the current scope
   --> src/mimefactory.rs:166:18
    |
164 |               let list_post = chat
    |  _____________________________-
165 | |                 .param
166 | |                 .get(Param::ListPost)
    | |                 -^^^ method not found in `dyn Params`
    | |_________________|
    | 

error[E0599]: no method named `get` found for trait object `(dyn rusqlite::Params + 'static)` in the current scope
   --> src/mimefactory.rs:474:32
    |
474 |                     chat.param.get(Param::LastSubject)
    |                                ^^^ method not found in `dyn Params`

error[E0599]: no function or associated item named `new` found for trait `rusqlite::Params`
    --> src/chat.rs:4467:29
     |
4467 |     let mut param = Params::new();
     |                             ^^^ function or associated item not found in `Params`

error[E0277]: the size for values of type `dyn rusqlite::Params` cannot be known at compilation time
    --> src/chat.rs:1170:19
     |
1170 |             .await?;
     |                   ^ doesn't have a size known at compile-time
     |
     = help: the trait `Sized` is not implemented for `dyn rusqlite::Params`, which is required by `std::result::Result<dyn rusqlite::Params, anyhow::Error>: FromResidual<std::result::Result<Infallible, anyhow::Error>>`
     = help: the following other types implement trait `FromResidual<R>`:
               <std::result::Result<T, F> as FromResidual<Yeet<E>>>
               <std::result::Result<T, F> as FromResidual<std::result::Result<Infallible, E>>>
     = note: required for `std::result::Result<dyn rusqlite::Params, anyhow::Error>` to implement `FromResidual<std::result::Result<Infallible, anyhow::Error>>`

error[E0277]: the trait bound `dyn rusqlite::Params: std::default::Default` is not satisfied
    --> src/chat.rs:1173:14
     |
1173 |             .unwrap_or_default())
     |              ^^^^^^^^^^^^^^^^^ the trait `std::default::Default` is not implemented for `dyn rusqlite::Params`
     |
note: required by a bound in `std::option::Option::<T>::unwrap_or_default`
    --> /home/k/.rustup/toolchains/1.77.1-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/core/src/option.rs:1003:12
     |
1001 |     pub fn unwrap_or_default(self) -> T
     |            ----------------- required by a bound in this associated function
1002 |     where
1003 |         T: Default,
     |            ^^^^^^^ required by this bound in `Option::<T>::unwrap_or_default`

error[E0277]: the trait bound `dyn rusqlite::Params: std::default::Default` is not satisfied
    --> src/chat.rs:1172:32
     |
1172 |             .map(|s| s.parse().unwrap_or_default())
     |                                ^^^^^^^^^^^^^^^^^ the trait `std::default::Default` is not implemented for `dyn rusqlite::Params`
     |
note: required by a bound in `std::result::Result::<T, E>::unwrap_or_default`
    --> /home/k/.rustup/toolchains/1.77.1-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/core/src/result.rs:1106:12
     |
1104 |     pub fn unwrap_or_default(self) -> T
     |            ----------------- required by a bound in this associated function
1105 |     where
1106 |         T: Default,
     |            ^^^^^^^ required by this bound in `Result::<T, E>::unwrap_or_default`

error[E0277]: the trait bound `dyn rusqlite::Params: FromStr` is not satisfied
    --> src/chat.rs:1172:24
     |
1172 |             .map(|s| s.parse().unwrap_or_default())
     |                        ^^^^^ the trait `FromStr` is not implemented for `dyn rusqlite::Params`
     |
     = help: the following other types implement trait `FromStr`:
               bool
               char
               isize
               i8
               i16
               i32
               i64
               i128
             and 232 others
note: required by a bound in `core::str::<impl str>::parse`
    --> /home/k/.rustup/toolchains/1.77.1-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/core/src/str/mod.rs:2413:21
     |
2413 |     pub fn parse<F: FromStr>(&self) -> Result<F, F::Err> {
     |                     ^^^^^^^ required by this bound in `core::str::<impl str>::parse`

error[E0277]: the size for values of type `dyn rusqlite::Params` cannot be known at compilation time
    --> src/chat.rs:1171:12
     |
1171 |           Ok(res
     |  _________--_^
     | |         |
     | |         required by a bound introduced by this call
1172 | |             .map(|s| s.parse().unwrap_or_default())
1173 | |             .unwrap_or_default())
     | |________________________________^ doesn't have a size known at compile-time
     |
     = help: the trait `Sized` is not implemented for `dyn rusqlite::Params`
note: required by a bound in `std::prelude::v1::Ok`
    --> /home/k/.rustup/toolchains/1.77.1-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/core/src/result.rs:502:17
     |
502  | pub enum Result<T, E> {
     |                 ^ required by this bound in `std::prelude::v1::Ok`
...
506  |     Ok(#[stable(feature = "rust1", since = "1.0.0")] T),
     |     -- required by a bound in this tuple variant

error[E0277]: the size for values of type `dyn rusqlite::Params` cannot be known at compilation time
    --> src/chat.rs:1172:14
     |
1172 |             .map(|s| s.parse().unwrap_or_default())
     |              ^^^ doesn't have a size known at compile-time
     |
     = help: the trait `Sized` is not implemented for `dyn rusqlite::Params`
note: required by a bound in `std::option::Option::<T>::map`
    --> /home/k/.rustup/toolchains/1.77.1-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/core/src/option.rs:1067:16
     |
1067 |     pub fn map<U, F>(self, f: F) -> Option<U>
     |                ^ required by this bound in `Option::<T>::map`

error[E0746]: return type cannot have an unboxed trait object
    --> src/chat.rs:1172:22
     |
1172 |             .map(|s| s.parse().unwrap_or_default())
     |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ doesn't have a size known at compile-time
     |
help: box the return type, and wrap all of the returned values in `Box::new`
     |
1172 |             .map(|s| Box::new(Box<s.parse().unwrap_or_default())>)
     |                      +++++++++                                 +

error[E0277]: the size for values of type `(dyn rusqlite::Params + 'static)` cannot be known at compilation time
    --> src/chat.rs:1178:45
     |
1178 |         let param = self.get_param(context).await?;
     |                                             ^^^^^ doesn't have a size known at compile-time
     |
     = help: the trait `Sized` is not implemented for `(dyn rusqlite::Params + 'static)`
note: required by a bound in `std::result::Result`
    --> /home/k/.rustup/toolchains/1.77.1-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/core/src/result.rs:502:17
     |
502  | pub enum Result<T, E> {
     |                 ^ required by this bound in `Result`

error[E0277]: the size for values of type `dyn rusqlite::Params` cannot be known at compilation time
    --> src/chat.rs:1178:21
     |
1178 |         let param = self.get_param(context).await?;
     |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ doesn't have a size known at compile-time
     |
     = help: the trait `Sized` is not implemented for `dyn rusqlite::Params`, which is required by `std::result::Result<dyn rusqlite::Params, anyhow::Error>: Try`
     = note: required for `std::result::Result<dyn rusqlite::Params, anyhow::Error>` to implement `Try`

error[E0277]: the size for values of type `dyn rusqlite::Params` cannot be known at compilation time
    --> src/chat.rs:1178:21
     |
1178 |         let param = self.get_param(context).await?;
     |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ doesn't have a size known at compile-time
     |
     = help: the trait `Sized` is not implemented for `dyn rusqlite::Params`
     = note: all local variables must have a statically known size
     = help: unsized locals are gated as an unstable feature

error[E0277]: the size for values of type `dyn rusqlite::Params` cannot be known at compilation time
    --> src/chat.rs:1178:50
     |
1178 |         let param = self.get_param(context).await?;
     |                                                  ^ doesn't have a size known at compile-time
     |
     = help: the trait `Sized` is not implemented for `dyn rusqlite::Params`
note: required by a bound in `Break`
    --> /home/k/.rustup/toolchains/1.77.1-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/core/src/ops/control_flow.rs:85:25
     |
85   | pub enum ControlFlow<B, C = ()> {
     |                         ^^^^^^ required by this bound in `Break`
...
93   |     Break(B),
     |     ----- required by a bound in this variant

error[E0599]: no method named `get_bool` found for trait object `dyn rusqlite::Params` in the current scope
    --> src/chat.rs:1179:32
     |
1179 |         let unpromoted = param.get_bool(Param::Unpromoted).unwrap_or_default();
     |                                ^^^^^^^^ method not found in `dyn Params`

error[E0277]: the size for values of type `dyn rusqlite::Params` cannot be known at compilation time
    --> src/chat.rs:1178:13
     |
1178 |         let param = self.get_param(context).await?;
     |             ^^^^^ doesn't have a size known at compile-time
     |
     = help: the trait `Sized` is not implemented for `dyn rusqlite::Params`
     = note: all local variables must have a statically known size
     = help: unsized locals are gated as an unstable feature

error[E0277]: the size for values of type `(dyn rusqlite::Params + 'static)` cannot be known at compilation time
    --> src/chat.rs:1191:36
     |
1191 |         Ok(self.get_param(context).await?.exists(Param::Selftalk))
     |                                    ^^^^^ doesn't have a size known at compile-time
     |
     = help: the trait `Sized` is not implemented for `(dyn rusqlite::Params + 'static)`
note: required by a bound in `std::result::Result`
    --> /home/k/.rustup/toolchains/1.77.1-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/core/src/result.rs:502:17
     |
502  | pub enum Result<T, E> {
     |                 ^ required by this bound in `Result`

error[E0277]: the size for values of type `dyn rusqlite::Params` cannot be known at compilation time
    --> src/chat.rs:1191:12
     |
1191 |         Ok(self.get_param(context).await?.exists(Param::Selftalk))
     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ doesn't have a size known at compile-time
     |
     = help: the trait `Sized` is not implemented for `dyn rusqlite::Params`, which is required by `std::result::Result<dyn rusqlite::Params, anyhow::Error>: Try`
     = note: required for `std::result::Result<dyn rusqlite::Params, anyhow::Error>` to implement `Try`

error[E0277]: the size for values of type `dyn rusqlite::Params` cannot be known at compilation time
    --> src/chat.rs:1191:12
     |
1191 |         Ok(self.get_param(context).await?.exists(Param::Selftalk))
     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ doesn't have a size known at compile-time
     |
     = help: the trait `Sized` is not implemented for `dyn rusqlite::Params`
     = note: all local variables must have a statically known size
     = help: unsized locals are gated as an unstable feature

error[E0277]: the size for values of type `dyn rusqlite::Params` cannot be known at compilation time
    --> src/chat.rs:1191:41
     |
1191 |         Ok(self.get_param(context).await?.exists(Param::Selftalk))
     |                                         ^ doesn't have a size known at compile-time
     |
     = help: the trait `Sized` is not implemented for `dyn rusqlite::Params`
note: required by a bound in `Break`
    --> /home/k/.rustup/toolchains/1.77.1-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/core/src/ops/control_flow.rs:85:25
     |
85   | pub enum ControlFlow<B, C = ()> {
     |                         ^^^^^^ required by this bound in `Break`
...
93   |     Break(B),
     |     ----- required by a bound in this variant

error[E0277]: the trait bound `dyn rusqlite::Params: std::str::FromStr` is not satisfied
    --> src/chat.rs:1542:57
     |
1542 |                         param: row.get::<_, String>(3)?.parse().unwrap_or_default(),
     |                                                         ^^^^^ the trait `std::str::FromStr` is not implemented for `dyn rusqlite::Params`
     |
     = help: the following other types implement trait `std::str::FromStr`:
               bool
               char
               isize
               i8
               i16
               i32
               i64
               i128
             and 248 others
note: required by a bound in `core::str::<impl str>::parse`
    --> /home/k/.rustup/toolchains/1.77.1-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/core/src/str/mod.rs:2413:21
     |
2413 |     pub fn parse<F: FromStr>(&self) -> Result<F, F::Err> {
     |                     ^^^^^^^ required by this bound in `core::str::<impl str>::parse`

error[E0277]: `(dyn rusqlite::Params + 'static)` cannot be sent between threads safely
    --> src/chat.rs:1530:14
     |
1530 |             .query_row(
     |              ^^^^^^^^^ `(dyn rusqlite::Params + 'static)` cannot be sent between threads safely
     |
     = help: within `chat::Chat`, the trait `std::marker::Send` is not implemented for `(dyn rusqlite::Params + 'static)`, which is required by `chat::Chat: std::marker::Send`
note: required because it appears within the type `chat::Chat`
    --> src/chat.rs:1492:12
     |
1492 | pub struct Chat {
     |            ^^^^
note: required by a bound in `sql::Sql::query_row`
    --> src/sql.rs:467:12
     |
459  |     pub async fn query_row<T, F>(
     |                  --------- required by a bound in this associated function
...
467  |         T: Send + 'static,
     |            ^^^^ required by this bound in `Sql::query_row`

error[E0599]: no method named `exists` found for trait object `dyn rusqlite::Params` in the current scope
    --> src/chat.rs:1191:43
     |
1191 |         Ok(self.get_param(context).await?.exists(Param::Selftalk))
     |                                           ^^^^^^ method not found in `dyn Params`

error[E0277]: the size for values of type `(dyn rusqlite::Params + 'static)` cannot be known at compilation time
    --> src/chat.rs:1196:36
     |
1196 |         Ok(self.get_param(context).await?.exists(Param::Devicetalk))
     |                                    ^^^^^ doesn't have a size known at compile-time
     |
     = help: the trait `Sized` is not implemented for `(dyn rusqlite::Params + 'static)`
note: required by a bound in `std::result::Result`
    --> /home/k/.rustup/toolchains/1.77.1-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/core/src/result.rs:502:17
     |
502  | pub enum Result<T, E> {
     |                 ^ required by this bound in `Result`

error[E0277]: the size for values of type `dyn rusqlite::Params` cannot be known at compilation time
    --> src/chat.rs:1196:12
     |
1196 |         Ok(self.get_param(context).await?.exists(Param::Devicetalk))
     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ doesn't have a size known at compile-time
     |
     = help: the trait `Sized` is not implemented for `dyn rusqlite::Params`, which is required by `std::result::Result<dyn rusqlite::Params, anyhow::Error>: Try`
     = note: required for `std::result::Result<dyn rusqlite::Params, anyhow::Error>` to implement `Try`

error[E0277]: the size for values of type `dyn rusqlite::Params` cannot be known at compilation time
    --> src/chat.rs:1196:12
     |
1196 |         Ok(self.get_param(context).await?.exists(Param::Devicetalk))
     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ doesn't have a size known at compile-time
     |
     = help: the trait `Sized` is not implemented for `dyn rusqlite::Params`
     = note: all local variables must have a statically known size
     = help: unsized locals are gated as an unstable feature

error[E0277]: the size for values of type `dyn rusqlite::Params` cannot be known at compilation time
    --> src/chat.rs:1196:41
     |
1196 |         Ok(self.get_param(context).await?.exists(Param::Devicetalk))
     |                                         ^ doesn't have a size known at compile-time
     |
     = help: the trait `Sized` is not implemented for `dyn rusqlite::Params`
note: required by a bound in `Break`
    --> /home/k/.rustup/toolchains/1.77.1-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/core/src/ops/control_flow.rs:85:25
     |
85   | pub enum ControlFlow<B, C = ()> {
     |                         ^^^^^^ required by this bound in `Break`
...
93   |     Break(B),
     |     ----- required by a bound in this variant

error[E0599]: no method named `exists` found for trait object `dyn rusqlite::Params` in the current scope
    --> src/chat.rs:1196:43
     |
1196 |         Ok(self.get_param(context).await?.exists(Param::Devicetalk))
     |                                           ^^^^^^ method not found in `dyn Params`

error[E0277]: the size for values of type `(dyn rusqlite::Params + 'static)` cannot be known at compilation time
    --> src/chat.rs:1203:14
     |
1203 |             .await?
     |              ^^^^^ doesn't have a size known at compile-time
     |
     = help: the trait `Sized` is not implemented for `(dyn rusqlite::Params + 'static)`
note: required by a bound in `std::result::Result`
    --> /home/k/.rustup/toolchains/1.77.1-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/core/src/result.rs:502:17
     |
502  | pub enum Result<T, E> {
     |                 ^ required by this bound in `Result`

error[E0277]: the size for values of type `dyn rusqlite::Params` cannot be known at compilation time
    --> src/chat.rs:1201:12
     |
1201 |           Ok(self
     |  ____________^
1202 | |             .get_param(context)
1203 | |             .await?
     | |___________________^ doesn't have a size known at compile-time
     |
     = help: the trait `Sized` is not implemented for `dyn rusqlite::Params`, which is required by `std::result::Result<dyn rusqlite::Params, anyhow::Error>: Try`
     = note: required for `std::result::Result<dyn rusqlite::Params, anyhow::Error>` to implement `Try`

error[E0277]: the size for values of type `dyn rusqlite::Params` cannot be known at compilation time
    --> src/chat.rs:1201:12
     |
1201 |           Ok(self
     |  ____________^
1202 | |             .get_param(context)
1203 | |             .await?
     | |___________________^ doesn't have a size known at compile-time
     |
     = help: the trait `Sized` is not implemented for `dyn rusqlite::Params`
     = note: all local variables must have a statically known size
     = help: unsized locals are gated as an unstable feature

error[E0277]: the size for values of type `dyn rusqlite::Params` cannot be known at compilation time
    --> src/chat.rs:1203:19
     |
1203 |             .await?
     |                   ^ doesn't have a size known at compile-time
     |
     = help: the trait `Sized` is not implemented for `dyn rusqlite::Params`
note: required by a bound in `Break`
    --> /home/k/.rustup/toolchains/1.77.1-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/core/src/ops/control_flow.rs:85:25
     |
85   | pub enum ControlFlow<B, C = ()> {
     |                         ^^^^^^ required by this bound in `Break`
...
93   |     Break(B),
     |     ----- required by a bound in this variant

error[E0599]: no method named `get_i64` found for trait object `dyn rusqlite::Params` in the current scope
    --> src/chat.rs:1204:14
     |
1201 |           Ok(self
     |  ____________-
1202 | |             .get_param(context)
1203 | |             .await?
1204 | |             .get_i64(Param::MemberListTimestamp)
     | |             -^^^^^^^ method not found in `dyn Params`
     | |_____________|
     | 

error[E0277]: the size for values of type `(dyn rusqlite::Params + 'static)` cannot be known at compilation time
    --> src/chat.rs:1513:16
     |
1513 |     pub param: Params,
     |                ^^^^^^ doesn't have a size known at compile-time
     |
     = help: the trait `Sized` is not implemented for `(dyn rusqlite::Params + 'static)`
     = note: only the last field of a struct may have a dynamically sized type
     = help: change the field's type to have a statically known size
help: borrowed types always have a statically known size
     |
1513 |     pub param: &Params,
     |                +
help: the `Box` type always has a statically known size and allocates its contents in the heap
     |
1513 |     pub param: Box<Params>,
     |                ++++      +

error[E0599]: the method `to_string` exists for trait object `dyn Params`, but its trait bounds were not satisfied
    --> src/chat.rs:1720:29
     |
1720 |                 (self.param.to_string(), self.id),
     |                             ^^^^^^^^^ method cannot be called on `dyn Params` due to unsatisfied trait bounds
     |
    ::: /home/k/.cargo/registry/src/index.crates.io-6f17d22bba15001f/rusqlite-0.31.0/src/params.rs:180:1
     |
180  | pub trait Params: Sealed {
     | ------------------------ doesn't satisfy `dyn rusqlite::Params: ToString` or `dyn rusqlite::Params: std::fmt::Display`
     |
     = note: the following trait bounds were not satisfied:
             `dyn rusqlite::Params: std::fmt::Display`
             which is required by `dyn rusqlite::Params: ToString`

error[E0599]: no method named `get` found for trait object `(dyn rusqlite::Params + 'static)` in the current scope
    --> src/chat.rs:1748:45
     |
1748 |         if let Some(image_rel) = self.param.get(Param::ProfileImage) {
     |                                             ^^^ method not found in `dyn Params`

error[E0599]: the method `to_string` exists for trait object `dyn Params`, but its trait bounds were not satisfied
    --> src/chat.rs:1806:31
     |
1806 |             param: self.param.to_string(),
     |                               ^^^^^^^^^ method cannot be called on `dyn Params` due to unsatisfied trait bounds
     |
    ::: /home/k/.cargo/registry/src/index.crates.io-6f17d22bba15001f/rusqlite-0.31.0/src/params.rs:180:1
     |
180  | pub trait Params: Sealed {
     | ------------------------ doesn't satisfy `dyn rusqlite::Params: ToString` or `dyn rusqlite::Params: std::fmt::Display`
     |
     = note: the following trait bounds were not satisfied:
             `dyn rusqlite::Params: std::fmt::Display`
             which is required by `dyn rusqlite::Params: ToString`

error[E0599]: no method named `set` found for trait object `(dyn rusqlite::Params + 'static)` in the current scope
    --> src/chat.rs:2353:20
     |
2353 |         chat.param.set(Param::ProfileImage, icon);
     |                    ^^^ method not found in `dyn Params`

error[E0599]: no method named `set` found for trait object `(dyn rusqlite::Params + 'static)` in the current scope
    --> src/chat.rs:2368:20
     |
2368 |         chat.param.set(Param::ProfileImage, &icon);
     |                    ^^^ method not found in `dyn Params`

error[E0599]: no function or associated item named `from_str` found for trait `rusqlite::Params`
    --> src/chat.rs:3122:34
     |
3122 |                 || match Params::from_str(&params) {
     |                                  ^^^^^^^^ function or associated item not found in `Params`

error[E0599]: no method named `get_int` found for trait object `(dyn rusqlite::Params + 'static)` in the current scope
    --> src/chat.rs:3728:37
     |
3728 |     if from_handshake && chat.param.get_int(Param::Unpromoted).unwrap_or_default() == 1 {
     |                                     ^^^^^^^ method not found in `dyn Params`

error[E0599]: no method named `remove` found for trait object `(dyn rusqlite::Params + 'static)` in the current scope
    --> src/chat.rs:3729:20
     |
3729 |         chat.param.remove(Param::Unpromoted);
     |                    ^^^^^^ method not found in `dyn Params`

error[E0599]: no method named `remove` found for trait object `(dyn rusqlite::Params + 'static)` in the current scope
    --> src/chat.rs:4092:20
     |
4092 |         chat.param.remove(Param::ProfileImage);
     |                    ^^^^^^ method not found in `dyn Params`

error[E0599]: no method named `set` found for trait object `(dyn rusqlite::Params + 'static)` in the current scope
    --> src/chat.rs:4098:20
     |
4098 |         chat.param.set(Param::ProfileImage, image_blob.as_name());
     |                    ^^^ method not found in `dyn Params`

error[E0599]: `&context::Context` is not an iterator
    --> src/chat.rs:4268:24
     |
4268 |     let stmt = context.count("SELECT COUNT(*) FROM chats WHERE id>DC_CHAT_ID_LAST_SPECIAL AND blocked=0;", ()).await?;
     |                        ^^^^^ `&context::Context` is not an iterator
     |
    ::: src/context.rs:209:1
     |
209  | pub struct Context {
     | ------------------ doesn't satisfy `context::Context: Iterator`
...
223  | pub struct InnerContext {
     | ----------------------- doesn't satisfy `InnerContext: Iterator`
     |
     = note: the following trait bounds were not satisfied:
             `&context::Context: Iterator`
             which is required by `&mut &context::Context: Iterator`
             `context::Context: Iterator`
             which is required by `&mut context::Context: Iterator`
             `InnerContext: Iterator`
             which is required by `&mut InnerContext: Iterator`
note: the trait `Iterator` must be implemented
    --> /home/k/.rustup/toolchains/1.77.1-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/core/src/iter/traits/iterator.rs:75:1
     |
75   | pub trait Iterator {
     | ^^^^^^^^^^^^^^^^^^
     = help: items from traits can only be used if the trait is implemented and in scope
     = note: the following trait defines an item `count`, perhaps you need to implement it:
             candidate #1: `Iterator`

error[E0599]: no method named `get_i64` found for trait object `(dyn rusqlite::Params + 'static)` in the current scope
   --> src/reaction.rs:345:14
    |
343 |           if self
    |  ____________-
344 | |             .param
345 | |             .get_i64(Param::LastReactionTimestamp)
    | |             -^^^^^^^ method not found in `dyn Params`
    | |_____________|
    | 

error[E0599]: no method named `get_int` found for trait object `(dyn rusqlite::Params + 'static)` in the current scope
   --> src/reaction.rs:353:18
    |
352 | /             self.param
353 | |                 .get_int(Param::LastReactionMsgId)
    | |                 -^^^^^^^ method not found in `dyn Params`
    | |_________________|
    | 

error[E0599]: no method named `get_int` found for trait object `(dyn rusqlite::Params + 'static)` in the current scope
   --> src/reaction.rs:365:18
    |
364 | /             self.param
365 | |                 .get_int(Param::LastReactionContactId)
    | |                 -^^^^^^^ method not found in `dyn Params`
    | |_________________|
    | 

error[E0277]: the trait bound `dyn rusqlite::Params: std::str::FromStr` is not satisfied
    --> src/chat.rs:1172:24
     |
1172 |             .map(|s| s.parse().unwrap_or_default())
     |                        ^^^^^ the trait `std::str::FromStr` is not implemented for `dyn rusqlite::Params`
     |
     = help: the following other types implement trait `std::str::FromStr`:
               bool
               char
               isize
               i8
               i16
               i32
               i64
               i128
             and 248 others
note: required by a bound in `core::str::<impl str>::parse`
    --> /home/k/.rustup/toolchains/1.77.1-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/core/src/str/mod.rs:2413:21
     |
2413 |     pub fn parse<F: FromStr>(&self) -> Result<F, F::Err> {
     |                     ^^^^^^^ required by this bound in `core::str::<impl str>::parse`

error[E0599]: no method named `update_timestamp` found for trait object `(dyn rusqlite::Params + 'static)` in the current scope
    --> src/receive_imf.rs:1661:14
     |
1659 |           if chat
     |  ____________-
1660 | |             .param
1661 | |             .update_timestamp(Param::SubjectTimestamp, sort_timestamp)?
     | |             -^^^^^^^^^^^^^^^^ method not found in `dyn Params`
     | |_____________|
     | 

error[E0599]: no method named `set` found for trait object `(dyn rusqlite::Params + 'static)` in the current scope
    --> src/receive_imf.rs:1667:24
     |
1667 |             chat.param.set(Param::LastSubject, subject);
     |                        ^^^ method not found in `dyn Params`

error: future cannot be sent between threads safely
   --> src/scheduler.rs:848:25
    |
848 |             task::spawn(inbox_loop(ctx, inbox_start_send, inbox_handlers))
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ future returned by `inbox_loop` is not `Send`
    |
    = help: within `impl futures::Future<Output = ()>`, the trait `std::marker::Send` is not implemented for `(dyn rusqlite::Params + 'static)`, which is required by `impl futures::Future<Output = ()>: std::marker::Send`
note: future is not `Send` as this value is used across an await
   --> src/chat.rs:749:18
    |
734 |         let chat = Chat::load_from_db(context, self).await?;
    |             ---- has type `Chat` which is not `Send`
...
749 |                 .await?;
    |                  ^^^^^ await occurs here, with `chat` maybe used later
note: required by a bound in `tokio::spawn`
   --> /home/k/.cargo/registry/src/index.crates.io-6f17d22bba15001f/tokio-1.37.0/src/task/spawn.rs:166:21
    |
164 |     pub fn spawn<F>(future: F) -> JoinHandle<F::Output>
    |            ----- required by a bound in this function
165 |     where
166 |         F: Future + Send + 'static,
    |                     ^^^^ required by this bound in `spawn`

error: future cannot be sent between threads safely
    --> src/scheduler.rs:848:25
     |
848  |             task::spawn(inbox_loop(ctx, inbox_start_send, inbox_handlers))
     |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ future returned by `inbox_loop` is not `Send`
     |
     = help: within `Chat`, the trait `std::marker::Sync` is not implemented for `(dyn rusqlite::Params + 'static)`, which is required by `impl futures::Future<Output = ()>: std::marker::Send`
note: captured value is not `Send` because `&` references cannot be sent unless their referent is `Sync`
    --> src/chat.rs:2225:30
     |
2225 |     pub(crate) async fn sync(&self, context: &Context, action: SyncAction) -> Result<()> {
     |                              ^^^^^ has type `&Chat` which is not `Send`, because `Chat` is not `Sync`
note: required by a bound in `tokio::spawn`
    --> /home/k/.cargo/registry/src/index.crates.io-6f17d22bba15001f/tokio-1.37.0/src/task/spawn.rs:166:21
     |
164  |     pub fn spawn<F>(future: F) -> JoinHandle<F::Output>
     |            ----- required by a bound in this function
165  |     where
166  |         F: Future + Send + 'static,
     |                     ^^^^ required by this bound in `spawn`

error: future cannot be sent between threads safely
   --> src/scheduler.rs:865:42
    |
865 |                 let handle = task::spawn(simple_imap_loop(ctx, start_send, handlers, meaning));
    |                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ future returned by `simple_imap_loop` is not `Send`
    |
    = help: within `impl futures::Future<Output = ()>`, the trait `std::marker::Send` is not implemented for `(dyn rusqlite::Params + 'static)`, which is required by `impl futures::Future<Output = ()>: std::marker::Send`
note: future is not `Send` as this value is used across an await
   --> src/chat.rs:749:18
    |
734 |         let chat = Chat::load_from_db(context, self).await?;
    |             ---- has type `Chat` which is not `Send`
...
749 |                 .await?;
    |                  ^^^^^ await occurs here, with `chat` maybe used later
note: required by a bound in `tokio::spawn`
   --> /home/k/.cargo/registry/src/index.crates.io-6f17d22bba15001f/tokio-1.37.0/src/task/spawn.rs:166:21
    |
164 |     pub fn spawn<F>(future: F) -> JoinHandle<F::Output>
    |            ----- required by a bound in this function
165 |     where
166 |         F: Future + Send + 'static,
    |                     ^^^^ required by this bound in `spawn`

error: future cannot be sent between threads safely
    --> src/scheduler.rs:865:42
     |
865  |                 let handle = task::spawn(simple_imap_loop(ctx, start_send, handlers, meaning));
     |                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ future returned by `simple_imap_loop` is not `Send`
     |
     = help: within `Chat`, the trait `std::marker::Sync` is not implemented for `(dyn rusqlite::Params + 'static)`, which is required by `impl futures::Future<Output = ()>: std::marker::Send`
note: captured value is not `Send` because `&` references cannot be sent unless their referent is `Sync`
    --> src/chat.rs:2225:30
     |
2225 |     pub(crate) async fn sync(&self, context: &Context, action: SyncAction) -> Result<()> {
     |                              ^^^^^ has type `&Chat` which is not `Send`, because `Chat` is not `Sync`
note: required by a bound in `tokio::spawn`
    --> /home/k/.cargo/registry/src/index.crates.io-6f17d22bba15001f/tokio-1.37.0/src/task/spawn.rs:166:21
     |
164  |     pub fn spawn<F>(future: F) -> JoinHandle<F::Output>
     |            ----- required by a bound in this function
165  |     where
166  |         F: Future + Send + 'static,
     |                     ^^^^ required by this bound in `spawn`

error: future cannot be sent between threads safely
   --> src/scheduler.rs:877:25
    |
877 |             task::spawn(smtp_loop(ctx, smtp_start_send, smtp_handlers))
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ future returned by `smtp_loop` is not `Send`
    |
    = help: within `impl futures::Future<Output = ()>`, the trait `std::marker::Send` is not implemented for `(dyn rusqlite::Params + 'static)`, which is required by `impl futures::Future<Output = ()>: std::marker::Send`
note: future is not `Send` as this value is used across an await
   --> src/message.rs:851:68
    |
839 |         let chat_loaded: Chat;
    |             ----------- has type `Chat` which is not `Send`
...
851 |                     Some(Contact::get_by_id(context, self.from_id).await?)
    |                                                                    ^^^^^ await occurs here, with `chat_loaded` maybe used later
note: required by a bound in `tokio::spawn`
   --> /home/k/.cargo/registry/src/index.crates.io-6f17d22bba15001f/tokio-1.37.0/src/task/spawn.rs:166:21
    |
164 |     pub fn spawn<F>(future: F) -> JoinHandle<F::Output>
    |            ----- required by a bound in this function
165 |     where
166 |         F: Future + Send + 'static,
    |                     ^^^^ required by this bound in `spawn`

error: future cannot be sent between threads safely
   --> src/scheduler.rs:877:25
    |
877 |             task::spawn(smtp_loop(ctx, smtp_start_send, smtp_handlers))
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ future returned by `smtp_loop` is not `Send`
    |
    = help: within `Chat`, the trait `std::marker::Sync` is not implemented for `(dyn rusqlite::Params + 'static)`, which is required by `impl futures::Future<Output = ()>: std::marker::Send`
note: future is not `Send` as this value is used across an await
   --> src/message.rs:851:68
    |
840 |         let chat = if let Some(chat) = chat {
    |             ---- has type `&Chat` which is not `Send`
...
851 |                     Some(Contact::get_by_id(context, self.from_id).await?)
    |                                                                    ^^^^^ await occurs here, with `chat` maybe used later
note: required by a bound in `tokio::spawn`
   --> /home/k/.cargo/registry/src/index.crates.io-6f17d22bba15001f/tokio-1.37.0/src/task/spawn.rs:166:21
    |
164 |     pub fn spawn<F>(future: F) -> JoinHandle<F::Output>
    |            ----- required by a bound in this function
165 |     where
166 |         F: Future + Send + 'static,
    |                     ^^^^ required by this bound in `spawn`

error: future cannot be sent between threads safely
   --> src/scheduler.rs:848:25
    |
848 |             task::spawn(inbox_loop(ctx, inbox_start_send, inbox_handlers))
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ future returned by `inbox_loop` is not `Send`
    |
    = help: within `impl futures::Future<Output = ()>`, the trait `std::marker::Send` is not implemented for `(dyn rusqlite::Params + 'static)`, which is required by `impl futures::Future<Output = ()>: std::marker::Send`
note: future is not `Send` as this value is used across an await
   --> src/chat.rs:749:18
    |
734 |         let chat = Chat::load_from_db(context, self).await?;
    |             ---- has type `chat::Chat` which is not `Send`
...
749 |                 .await?;
    |                  ^^^^^ await occurs here, with `chat` maybe used later
note: required by a bound in `tokio::spawn`
   --> /home/k/.cargo/registry/src/index.crates.io-6f17d22bba15001f/tokio-1.37.0/src/task/spawn.rs:166:21
    |
164 |     pub fn spawn<F>(future: F) -> JoinHandle<F::Output>
    |            ----- required by a bound in this function
165 |     where
166 |         F: Future + Send + 'static,
    |                     ^^^^ required by this bound in `spawn`

error: future cannot be sent between threads safely
    --> src/scheduler.rs:848:25
     |
848  |             task::spawn(inbox_loop(ctx, inbox_start_send, inbox_handlers))
     |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ future returned by `inbox_loop` is not `Send`
     |
     = help: within `chat::Chat`, the trait `std::marker::Sync` is not implemented for `(dyn rusqlite::Params + 'static)`, which is required by `impl futures::Future<Output = ()>: std::marker::Send`
note: captured value is not `Send` because `&` references cannot be sent unless their referent is `Sync`
    --> src/chat.rs:2225:30
     |
2225 |     pub(crate) async fn sync(&self, context: &Context, action: SyncAction) -> Result<()> {
     |                              ^^^^^ has type `&chat::Chat` which is not `Send`, because `chat::Chat` is not `Sync`
note: required by a bound in `tokio::spawn`
    --> /home/k/.cargo/registry/src/index.crates.io-6f17d22bba15001f/tokio-1.37.0/src/task/spawn.rs:166:21
     |
164  |     pub fn spawn<F>(future: F) -> JoinHandle<F::Output>
     |            ----- required by a bound in this function
165  |     where
166  |         F: Future + Send + 'static,
     |                     ^^^^ required by this bound in `spawn`

error: future cannot be sent between threads safely
   --> src/scheduler.rs:865:42
    |
865 |                 let handle = task::spawn(simple_imap_loop(ctx, start_send, handlers, meaning));
    |                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ future returned by `simple_imap_loop` is not `Send`
    |
    = help: within `impl futures::Future<Output = ()>`, the trait `std::marker::Send` is not implemented for `(dyn rusqlite::Params + 'static)`, which is required by `impl futures::Future<Output = ()>: std::marker::Send`
note: future is not `Send` as this value is used across an await
   --> src/chat.rs:749:18
    |
734 |         let chat = Chat::load_from_db(context, self).await?;
    |             ---- has type `chat::Chat` which is not `Send`
...
749 |                 .await?;
    |                  ^^^^^ await occurs here, with `chat` maybe used later
note: required by a bound in `tokio::spawn`
   --> /home/k/.cargo/registry/src/index.crates.io-6f17d22bba15001f/tokio-1.37.0/src/task/spawn.rs:166:21
    |
164 |     pub fn spawn<F>(future: F) -> JoinHandle<F::Output>
    |            ----- required by a bound in this function
165 |     where
166 |         F: Future + Send + 'static,
    |                     ^^^^ required by this bound in `spawn`

error: future cannot be sent between threads safely
    --> src/scheduler.rs:865:42
     |
865  |                 let handle = task::spawn(simple_imap_loop(ctx, start_send, handlers, meaning));
     |                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ future returned by `simple_imap_loop` is not `Send`
     |
     = help: within `chat::Chat`, the trait `std::marker::Sync` is not implemented for `(dyn rusqlite::Params + 'static)`, which is required by `impl futures::Future<Output = ()>: std::marker::Send`
note: captured value is not `Send` because `&` references cannot be sent unless their referent is `Sync`
    --> src/chat.rs:2225:30
     |
2225 |     pub(crate) async fn sync(&self, context: &Context, action: SyncAction) -> Result<()> {
     |                              ^^^^^ has type `&chat::Chat` which is not `Send`, because `chat::Chat` is not `Sync`
note: required by a bound in `tokio::spawn`
    --> /home/k/.cargo/registry/src/index.crates.io-6f17d22bba15001f/tokio-1.37.0/src/task/spawn.rs:166:21
     |
164  |     pub fn spawn<F>(future: F) -> JoinHandle<F::Output>
     |            ----- required by a bound in this function
165  |     where
166  |         F: Future + Send + 'static,
     |                     ^^^^ required by this bound in `spawn`

error: future cannot be sent between threads safely
   --> src/scheduler.rs:877:25
    |
877 |             task::spawn(smtp_loop(ctx, smtp_start_send, smtp_handlers))
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ future returned by `smtp_loop` is not `Send`
    |
    = help: within `impl futures::Future<Output = ()>`, the trait `std::marker::Send` is not implemented for `(dyn rusqlite::Params + 'static)`, which is required by `impl futures::Future<Output = ()>: std::marker::Send`
note: future is not `Send` as this value is used across an await
   --> src/message.rs:851:68
    |
839 |         let chat_loaded: Chat;
    |             ----------- has type `chat::Chat` which is not `Send`
...
851 |                     Some(Contact::get_by_id(context, self.from_id).await?)
    |                                                                    ^^^^^ await occurs here, with `chat_loaded` maybe used later
note: required by a bound in `tokio::spawn`
   --> /home/k/.cargo/registry/src/index.crates.io-6f17d22bba15001f/tokio-1.37.0/src/task/spawn.rs:166:21
    |
164 |     pub fn spawn<F>(future: F) -> JoinHandle<F::Output>
    |            ----- required by a bound in this function
165 |     where
166 |         F: Future + Send + 'static,
    |                     ^^^^ required by this bound in `spawn`

error: future cannot be sent between threads safely
   --> src/scheduler.rs:877:25
    |
877 |             task::spawn(smtp_loop(ctx, smtp_start_send, smtp_handlers))
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ future returned by `smtp_loop` is not `Send`
    |
    = help: within `chat::Chat`, the trait `std::marker::Sync` is not implemented for `(dyn rusqlite::Params + 'static)`, which is required by `impl futures::Future<Output = ()>: std::marker::Send`
note: future is not `Send` as this value is used across an await
   --> src/message.rs:851:68
    |
840 |         let chat = if let Some(chat) = chat {
    |             ---- has type `&chat::Chat` which is not `Send`
...
851 |                     Some(Contact::get_by_id(context, self.from_id).await?)
    |                                                                    ^^^^^ await occurs here, with `chat` maybe used later
note: required by a bound in `tokio::spawn`
   --> /home/k/.cargo/registry/src/index.crates.io-6f17d22bba15001f/tokio-1.37.0/src/task/spawn.rs:166:21
    |
164 |     pub fn spawn<F>(future: F) -> JoinHandle<F::Output>
    |            ----- required by a bound in this function
165 |     where
166 |         F: Future + Send + 'static,
    |                     ^^^^ required by this bound in `spawn`

error[E0599]: no method named `update_timestamp` found for trait object `(dyn rusqlite::Params + 'static)` in the current scope
    --> src/receive_imf.rs:2237:18
     |
2235 |               if chat
     |  ________________-
2236 | |                 .param
2237 | |                 .update_timestamp(Param::AvatarTimestamp, mime_parser.timestamp_sent)?
     | |                 -^^^^^^^^^^^^^^^^ method not found in `dyn Params`
     | |_________________|
     | 

error[E0599]: no method named `set` found for trait object `(dyn rusqlite::Params + 'static)` in the current scope
    --> src/receive_imf.rs:2241:36
     |
2241 |                         chat.param.set(Param::ProfileImage, profile_image);
     |                                    ^^^ method not found in `dyn Params`

error[E0599]: no method named `remove` found for trait object `(dyn rusqlite::Params + 'static)` in the current scope
    --> src/receive_imf.rs:2244:36
     |
2244 |                         chat.param.remove(Param::ProfileImage);
     |                                    ^^^^^^ method not found in `dyn Params`

error[E0599]: no method named `get` found for trait object `(dyn rusqlite::Params + 'static)` in the current scope
    --> src/receive_imf.rs:2454:45
     |
2454 |     if let Some(old_list_post) = chat.param.get(Param::ListPost) {
     |                                             ^^^ method not found in `dyn Params`

error[E0599]: no method named `remove` found for trait object `(dyn rusqlite::Params + 'static)` in the current scope
    --> src/receive_imf.rs:2458:24
     |
2458 |             chat.param.remove(Param::ListPost);
     |                        ^^^^^^ method not found in `dyn Params`

error[E0599]: no method named `set` found for trait object `(dyn rusqlite::Params + 'static)` in the current scope
    --> src/receive_imf.rs:2462:20
     |
2462 |         chat.param.set(Param::ListPost, list_post);
     |                    ^^^ method not found in `dyn Params`

error[E0599]: no method named `update_timestamp` found for trait object `(dyn rusqlite::Params + 'static)` in the current scope
   --> src/reaction.rs:203:14
    |
201 |           if chat
    |  ____________-
202 | |             .param
203 | |             .update_timestamp(Param::LastReactionTimestamp, timestamp)?
    | |             -^^^^^^^^^^^^^^^^ method not found in `dyn Params`
    | |_____________|
    | 

error[E0599]: no method named `set_i64` found for trait object `(dyn rusqlite::Params + 'static)` in the current scope
   --> src/reaction.rs:206:18
    |
205 | /             chat.param
206 | |                 .set_i64(Param::LastReactionMsgId, i64::from(msg_id.to_u32()));
    | |                 -^^^^^^^ method not found in `dyn Params`
    | |_________________|
    | 

error[E0599]: no method named `set_i64` found for trait object `(dyn rusqlite::Params + 'static)` in the current scope
   --> src/reaction.rs:208:18
    |
207 | /             chat.param
208 | |                 .set_i64(Param::LastReactionContactId, i64::from(contact_id.to_u32()));
    | |                 -^^^^^^^ method not found in `dyn Params`
    | |_________________|
    | 

error[E0782]: trait objects must include the `dyn` keyword
    --> src/chat.rs:1513:16
     |
1513 |     pub param: Params,
     |                ^^^^^^
     |
help: add `dyn` keyword before this trait
     |
1513 |     pub param: dyn Params,
     |                +++

error[E0782]: trait objects must include the `dyn` keyword
    --> src/chat.rs:1166:70
     |
1166 |     pub(crate) async fn get_param(self, context: &Context) -> Result<Params> {
     |                                                                      ^^^^^^
     |
help: add `dyn` keyword before this trait
     |
1166 |     pub(crate) async fn get_param(self, context: &Context) -> Result<dyn Params> {
     |                                                                      +++

Some errors have detailed explanations: E0252, E0277, E0432, E0599, E0746, E0782.
For more information about an error, try `rustc --explain E0252`.
warning: `deltachat` (lib) generated 9 warnings
error: could not compile `deltachat` (lib) due to 79 previous errors; 9 warnings emitted
warning: build failed, waiting for other jobs to finish...
warning: `deltachat` (lib test) generated 9 warnings (9 duplicates)
error: could not compile `deltachat` (lib test) due to 79 previous errors; 9 warnings emitted
error: command `/home/k/.rustup/toolchains/1.77.1-x86_64-unknown-linux-gnu/bin/cargo test --no-run --message-format json-render-diagnostics` exited with code 101

